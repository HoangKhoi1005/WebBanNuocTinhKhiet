"use strict";window.routes={cart_url:"/cart.js",cart_add_url:"/cart/add.js",cart_update_url:"/cart/change.js",cart_clear_url:"/cart/clear"},window.cartStrings={error:"Đã có lỗi xảy ra khi cập nhật số lượng. Vui lòng thử lại.",quantityError:"You can only add [quantity] of this item to your cart.",delete:"Xoá"},window.variantStrings={addToCart:"Đặt hàng ngay",soldOut:"Cháy hàng",avaiable:"Còn hàng",unAvailable:"",allowBuyWhenSoldOut:"Tạm hết hàng",noPrice:"Liên hệ",giftPrice:"Quà tặng"},window.toastString={toastAddSuccessTitle:"Thành công",toastAddErrorTitle:"Thất bại",toastAddSuccessMessage:"Sản phẩm đã được thêm vào giỏ hàng",toastAddErrorMessage:"Không thể thêm sản phẩm vào giỏ hàng",toastInventoryExccedTitle:"Cảnh báo",toastInventoryExccedMessage:"Sản phẩm đã đạt giới hạn tồn kho",toastInventoryMaxTitle:"Cảnh báo",toastInventoryMaxMessage:"Số lượng vượt quá giới hạn tồn kho",toastInventoryUnavaiTitle:"Cảnh báo",toastInventoryUnavaiMessage:"Sản phẩm không khả dụng",toastValidatePhoneTitle:"Lỗi",toastValidatePhoneMessage:"Số điện thoại không định dạng"},axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",axios.defaults.headers.post["X-Requested-With"]="XMLHttpRequest";const mewService={getCart:function(){return axios.get(routes.cart_url).then(t=>JSON.parse(t.request.response))},getProductJson:t=>axios.get(`${t}.json`).then(t=>JSON.parse(t.request.response)),getProductJsonSpec:(t,e)=>axios.get(`${t}?view=${e}`).then(t=>JSON.parse(t.request.response)),getProductHtml:(t,e)=>axios.get(`${t}?view=${e}`).then(t=>t.request.response),getFilter:t=>axios.get(`${t}`).then(t=>t.request.response),getSearchView:(t,e="product",a,s)=>void 0===s?axios.get(`/search?type=${e}&q=${t}&view=${a}`).then(t=>JSON.parse(t.request.response)):""!==mewService.serializeObjToSearchParamsString(s)?axios.get(`/search?type=${e}&q=${t} AND ${mewService.serializeObjToSearchParamsString(s)}&view=${a}`).then(t=>JSON.parse(t.request.response)):axios.get(`/search?type=${e}&q=${t}&view=${a}`).then(t=>JSON.parse(t.request.response)),addItem:(t,e)=>axios({url:routes.cart_add_url,data:`variantId=${t}&quantity=${e}`,method:"POST"}),addFromForm:t=>axios({url:routes.cart_add_url,data:`${t}`,method:"POST"}),updateItem:(t,e)=>axios({url:routes.cart_update_url,data:`variantId=${t}&quantity=${e}`,method:"POST"}),clearCart:()=>axios.post(routes.cart_clear_url),serializeFormData:t=>{let e={};for(let[a,s]of t)void 0!==e[a]?(Array.isArray(e[a])||(e[a]=[e[a]]),e[a].push(s)):e[a]=s;return e},serializeObjToSearchParamsString:function(t){let e=[];for(let a in t)if(t.hasOwnProperty(a))if(Array.isArray(t[a])){if(t[a].length){let s=[];t[a].forEach(t=>{s.push("("+t+")")}),s.join(" OR "),e.push(a+":("+s.join(" OR ")+")")}}else e.push(a+":("+objToStr[a]+")");return e.join(" AND ")},checkMaxQuantityAvailable:function(t,e,a){let s=parseInt(t);return new Promise((t,n)=>{mewService.getCart().then(i=>{if(0===i.items.length&&void 0!==a&&mewService.getProductJson(a).then(a=>{let i=a.variants.find(t=>t.id===parseInt(e));if(void 0===i&&n({status:"notFound"}),"bizweb"===i.inventory_management&&"deny"===i.inventory_policy){let e=parseInt(i.inventory_quantity);t(s>e?{status:"maxQuantity",quantity:e}:{status:"inRangeQuantity",quantity:s})}else t({status:"available",quantity:s})}),i.items.length>0){let r=i.items.find(t=>t.variant_id===parseInt(e));void 0!==a?void 0!==r?mewService.getProductJson(r.url).then(a=>{let i=a.variants.find(t=>t.id===parseInt(e));if(void 0===i)n({status:"notFound"});else if("bizweb"===i.inventory_management&&"deny"===i.inventory_policy){let e=parseInt(i.inventory_quantity);parseInt(r.quantity)===e?t({status:"unavailable",quantity:0}):s+parseInt(r.quantity)>e?e-parseInt(r.quantity)>=s?t({status:"inRangeQuantity",quantity:s}):t({status:"exceedQuantity",quantity:e-parseInt(r.quantity)}):t({status:"inRangeQuantity",quantity:s})}else t({status:"available",quantity:s})}):mewService.getProductJson(a).then(a=>{let i=a.variants.find(t=>t.variant_id===parseInt(e));if(void 0===i){let i=a.variants.find(t=>t.id===parseInt(e));if(void 0===i&&n({status:"notFound"}),"bizweb"===i.inventory_management&&"deny"===i.inventory_policy){let e=parseInt(i.inventory_quantity);t(s>e?{status:"maxQuantity",quantity:e}:{status:"inRangeQuantity",quantity:s})}else t({status:"available",quantity:s})}else if("bizweb"===i.inventory_management&&"deny"===i.inventory_policy){let e=parseInt(i.inventory_quantity);t(s===e?{status:"exceedQuantity",quantity:s}:s>e?{status:"maxQuantity",quantity:e}:{status:"inRangeQuantity",quantity:s})}else t({status:"available",quantity:s})}):(console.log(4),void 0===r&&n({status:"notFound"}),mewService.getProductJson(r.url).then(a=>{let i=a.variants.find(t=>t.id===parseInt(e));if(void 0===typeof i&&n({status:"notFound"}),"bizweb"===i.inventory_management&&"deny"===i.inventory_policy){let e=parseInt(i.inventory_quantity);r.quantity>=e?t({status:"unavailable",quantity:0}):t({status:"inRangeQuantity",quantity:s})}else t({status:"available",quantity:s})}))}})})},submitForm:t=>axios({url:"/contact",data:`${t}`,method:"POST"})};var debouncea=["apply"];!function(b,a){!function(a){for(;--a;)b.push(b.shift())}(++a)}(debouncea,168);var debounceb=function(a,b){return debouncea[a-=0]},debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){return a[debounceb("0x0")](d,e)},b)}}
Element.prototype.setAttributes=function(t){for(var e in t)if("styles"!==e&&"style"!==e||"object"!=typeof t[e])"html"===e?this.innerHTML=t[e]:this.setAttribute(e,t[e]);else for(var i in t[e])this.style[i]=t[e][i]}