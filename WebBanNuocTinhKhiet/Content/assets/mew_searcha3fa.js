const templateSearchProductItem=document.getElementById("quick-search-result-template"),templateSearchArticleItem=document.getElementById("quick-search-article-result-template"),templateSearchPageItem=document.getElementById("quick-search-page-result-template");$('.js-search-form input[type="text"]').on("keyup click",debounce(function(e){let t=$(this).parents("form").find(".searchResult"),r=`/search?q=${e.target.value.trim()}`;""!=e.target.value.trim()?(t.find(".all-result").attr("href",r),mewService.getSearchView(e.target.value.trim(),"product","product").then(e=>{t.removeClass("d-none"),0==e.searchResultCount?(t.find(".searchResult_products_text span").html(0),t.find(".searchResult_products").empty()):(t.find(".searchResult_products").empty(),Object.values(e.searchResult).forEach(e=>{const r=document.importNode(templateSearchProductItem.content,!0);r.querySelectorAll(".js-link").forEach(t=>t.setAttributes({title:e.title,href:e.url})),r.querySelectorAll(".js-title").forEach(t=>t.innerHTML=e.title),r.querySelectorAll(".js-img").forEach(t=>t.setAttributes({src:e.thumbnail,alt:e.title})),r.querySelectorAll(".js-price").forEach(t=>t.innerHTML=e.price),"0"!=e.compare_at_price&&r.querySelectorAll(".js-compare-price").forEach(t=>{t.innerHTML=e.compare_at_price,t.classList.remove("d-none")}),t.find(".searchResult_products").append(r)}),t.find(".searchResult_products_text span").html(e.searchResultCount))}).catch(e=>{t.addClass("d-none"),t.find(".searchResult_products").empty(),t.find(".searchResult_products_text span").html("0"),console.error("Đã có lỗi xảy ra: "+e.message)}),use_quick_search_article&&mewService.getSearchView(e.target.value.trim(),"article","article").then(e=>{t.removeClass("d-none"),0==e.searchResultCount?(t.find(".searchResult_articles_text span").html(0),t.find(".searchResult_articles").empty()):(t.find(".searchResult_articles").empty(),Object.values(e.searchResult).forEach(e=>{const r=document.importNode(templateSearchArticleItem.content,!0);r.querySelectorAll(".js-link").forEach(t=>t.setAttributes({title:e.title,href:e.url})),r.querySelectorAll(".js-title").forEach(t=>t.innerHTML=e.title),r.querySelectorAll(".js-img").forEach(t=>t.setAttributes({src:e.thumbnail,alt:e.title})),r.querySelectorAll(".js-content").forEach(t=>t.innerHTML=e.content),t.find(".searchResult_articles").append(r)}),t.find(".searchResult_articles_text span").html(e.searchResultCount))}).catch(e=>{t.addClass("d-none"),t.find(".searchResult_articles").empty(),t.find(".searchResult_articles_text span").html("0"),console.error("Đã có lỗi xảy ra: "+e.message)}),use_quick_search_page&&mewService.getSearchView(e.target.value.trim(),"page","page").then(e=>{t.removeClass("d-none"),0==e.searchResultCount?(t.find(".searchResult_pages").empty(),t.find(".searchResult_pages_text span").html(0)):(t.find(".searchResult_pages").empty(),Object.values(e.searchResult).forEach(e=>{const r=document.importNode(templateSearchArticleItem.content,!0);r.querySelectorAll(".js-link").forEach(t=>t.setAttributes({title:e.title,href:e.url})),r.querySelectorAll(".js-title").forEach(t=>t.innerHTML=e.title),r.querySelectorAll(".js-img").forEach(t=>t.setAttributes({src:e.thumbnail,alt:e.title})),r.querySelectorAll(".js-content").forEach(t=>t.innerHTML=e.content),t.find(".searchResult_pages").append(r)}),t.find(".searchResult_pages_text span").html(e.searchResultCount))}).catch(e=>{t.addClass("d-none"),t.find(".searchResult_pages").empty(),console.error("Đã có lỗi xảy ra: "+e.message)})):(t.addClass("d-none"),t.find(".searchResult_products").empty(),use_quick_search_article&&t.find(".searchResult_articles").empty(),use_quick_search_page&&t.find(".searchResult_pages").empty())},200));